{% load i18n %}

<!-- Title Block -->
<div class="library-title-block">
    <div class="">
        <h4 class="title-block-title" style=""> {% trans "Widget Manager" %} </h4>
    </div>

    <!-- nav bar -->
    <ul class="nav nav-tabs library-tools">
        <li class="active">
            <a href="#widget-crud-settings" class="nav-library-tab-link" data-toggle="tab">
                <i class="ion-settings add-tooltip library-tools-icon" data-placement="bottom" data-toggle="tooltip" data-original-title="{% trans "Settings" %}"></i>
            </a>
        </li>
        <li>
            <a href="#widget-crud-advanced" class="nav-library-tab-link" data-toggle="tab">
                <i class="ion-ios-gear add-tooltip library-tools-icon" data-placement="bottom" data-toggle="tooltip" data-original-title="{% trans "Advanced Settings" %}"></i>
            </a>
        </li>
        <li>
            <a href="#widget-crud-validation" class="nav-library-tab-link" data-toggle="tab">
                <i class="ion-wand add-tooltip library-tools-icon" data-placement="bottom" data-toggle="tooltip" data-original-title="{% trans "Validations" %}"></i>
            </a>
        </li>
    </ul>

</div>

<!-- Tabs Content -->
<div class="tab-content listing-container">

    <div id="widget-crud-settings" class="tab-pane fade in active">
        <!-- ko if: selection() === widget() -->
        <div class="node-widget-label" style="">
            <div class="control-label">
                {% trans "Widget Label" %}
            </div>
            <div class="col-sm-12 pad-no crud-widget-container">
                <input type="" placeholder="Widget Label" id="" class="form-control input-md widget-input" data-bind="value: widget().get('label'), valueUpdate: 'keyup'">
            </div>
        </div>

        <div class='widget-config-form' data-bind='component: {
            name: widgetLookup[widget().get("widget_id")()].name,
            params: {
                config: widget().configJSON,
                label: widget().get("label")(),
                configForm: true,
                value: ko.observable(null)
            }
        }'></div>
        <!-- /ko -->
    </div>

    <div id="widget-crud-advanced" class="tab-pane fade">
        <!-- ko if: selection() === widget() -->
        <div class="node-widget-label" style="">
            <div class="
            control-label">
                {% trans "Template" %}
            </div>
            <div class="col-sm-12 pad-no crud-widget-container">
                <select class="design" data-bind="value: widgetId, options: widgetList, optionsText: 'name', optionsValue: 'id', chosen: {disable_search_threshold: 10, width: '100%'}"></select>
            </div>
        </div>
        <!-- /ko -->
    </div>

    <div id="widget-crud-validation" class="tab-pane fade">
        <!-- ko if: selection() === widget() -->
        <div class="node-widget-label" style="">
            <div class="control-label">
                {% trans "Validations" %}
            </div>
            <div>
                <select data-placeholder="{% trans "Select validations..." %}" class="design" multiple data-bind="selectedOptions: widget().node.validations, options: validations, optionsText: 'validation', optionsValue: 'validationid', chosen: {disable_search_threshold: 10, width: '100%'}"></select>
            </div>
        </div>

        <div class="node-widget-label" style="">
            <div class="control-label">
                {% trans "Functions" %}
            </div>
            <div>
                <select data-placeholder="{% trans "Select functions..." %}" class="design" multiple data-bind="selectedOptions: widget().get('functions'), options: functions.filter(function(fn) { return fn.functiontype === widget().datatype.datatype; }), optionsText: 'name', optionsValue: 'functionid', chosen: {disable_search_threshold: 10, width: '100%'}"></select>
            </div>
        </div>
        <!-- /ko -->
    </div>

</div>
