{% load i18n %}
<script type="text/html" id="cardTree">
    <li class="card-tree-list"data-bind="css: {
        'active': self.selection() === card
    }">
        <a href="#" class="cc-link" aria-expanded="true" data-bind="css: {
            'card-container-link': card.isContainer(),
            'card-link': !card.isContainer(),
            'active': self.selection() === card
        }, click: self.selection">
            <i class="card-tree-list-icon" data-bind="css: {
                'ion-ios-folder-outline': card.isContainer(),
                'ion-ios-list-outline': !card.isContainer()
            }"></i>
            <span data-bind="text: card.get('name')"></span>
        </a>

        <ul class="card-tree-list-item" aria-expanded="true">
            <!-- ko template: {
                name: card.isContainer() ? 'cardTree' : 'cardTreeNodes',
                foreach: card.isContainer() ? get('cards') : get('nodes'),
                as: card.isContainer() ? 'card' : 'node'
            } --> <!-- /ko -->
        </ul>
    </li>
</script>

<script type="text/html" id="cardTreeNodes">
    <!-- ko if: node.datatype() !== 'semantic' -->
    <li class="card-tree-list" data-bind="css: {
        'active': self.selection() === node
    }">
        <a href="#" class="cc-link card-widget-link" data-bind="click: self.selection, css: {
            'active': self.selection() === node
        }">
            <i class="ion-ios-paper card-tree-list-icon"></i>
            <span data-bind="text: node.name"></span>
        </a>
    </li>
    <!-- /ko -->
</script>

<!-- ko foreach: { data: [$data], as: 'self' } -->
<div id="ep-card-tools">

    <!-- Toggle form/report TOC -->
    <div class="toc-title-block">
        <h4 class="title-block-title"> {% trans "Card Manager" %}</h4>
    </div>


    <!-- TOC Cards/Widgets -->
    <div id="card-management-forms" class="panel ep-card-tools-panel">
        <!-- ko template: { name: 'cardTree', foreach: [card], as: 'card' } --> <!-- /ko -->
    </div>
</div>
<!-- /ko -->
