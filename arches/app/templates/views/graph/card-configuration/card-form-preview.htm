{% load i18n %}
<!-- ko foreach: { data: [$data], as: 'self' } -->
<!-- Card Manager Panels and Forms -->
<div class="ep-card-crud-container">
    <!-- Card Preview -->
    <div id="card-preview">

        <div id="" class="panel">
            <div class="panel-heading">
                <div class="">
                    <h3 id="cc-title" class="panel-title card-main-title" data-bind="text: card.get('name')"></h3>
                </div>
            </div>

            <!-- Data Entry -->
            <div id="card-preview-crud" class="panel-body card-body fade in" style="padding-top: 0px;">
                <div id="cards" class="tab-base card-content-container outline" style="margin-bottom: 20px; margin-top: -2px;">
                    <!--Nav Tabs-->
                    <ul class="nav nav-tabs card-nav-container"  data-bind="sortable: {
                        data: card.isContainer() ? card.get('cards') : [card],
                        beforeMove: self.beforeMove
                    }">
                        <li id="summary-group" data-bind="css: {
                            'active': self.currentTabIndex()===$index()
                        }, click: self.selection">
                            <a id="summary-tab" href="#" class="card-tab-title">
                                <!-- Editable Span -->
                                <span class="editable-card">
                                    <i class="fa fa-align-justify"></i> <span data-bind="text: get('name')"></span>
                                </span>
                            </a>
                        </li>
                    </ul>

                    <div id="db-arches-app-alert" class="panel data-card-alert"></div>


                    <!--Tabs Content-->
                    <div class="tab-content card-content-tab" style="margin-left: 0px;">

                        <!-- ko foreach: {
                            data: card.isContainer() ? card.get('cards') : [card],
                            as: 'card'
                        } -->
                        <!-- Card -->
                        <div class="tab-pane fade" data-bind="css: {
                            'active in': self.currentTabIndex()===$index()
                        }">
                            <div class="panel-body card-panel-body">
                                <div id="" class="card-content">

                                    <div>
                                        <span data-bind="text: card.get('instructions')"></span>
                                        
                                        <!-- Help link -->
                                        <span>  
                                            <a id="card-help-link" href="" class="pull-right card-help help editable-help" data-bind="visible: card.get('enable_" style="display: none;"> Help <i class="fa fa-question-circle"></i></a>
                                        </span>
                                    </div>

                                    <!-- Form -->
                                    <div class="col-lg-9" style="padding-bottom: 10px;">

                                        <form class="widgets" style="margin-bottom: 20px;">
                                            <div data-bind="sortable: {
                                                data:card.get('widgets'),
                                                beforeMove: self.beforeMove
                                            }">
                                                <div data-bind='component: {
                                                    name: self.widgetLookup[get("widget_id")()].name,
                                                    params: {
                                                        config: configJSON(),
                                                        label: get("label")(),
                                                        value: ko.observable(null)
                                                    }
                                                }'></div>
                                            </div>
                                        </form>

                                        <!-- Save/Add Button -->
                                        <div id="card-save-tile-btn" class="install-buttons" style="display: none;">
                                            <button id="" class="btn btn-shim btn-mint btn-labeled btn-lg fa fa-plus"> Add</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /ko -->

                    </div>

                </div>

                <!-- Wizard Level Buttons -->
                <div class="wizard-buttons pull-right">
                    <button id="cc-delete-btn" class="btn btn-shim btn-danger btn-labeled btn-lg fa fa-times mar-rgt"> Discard
                    </button><button id="cc-save-btn" class="btn btn-shim btn-primary btn-labeled btn-lg fa fa-check"> Save</button>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- /ko -->
