<!--
ARCHES - a program developed to inventory and manage immovable cultural heritage.
Copyright (C) 2013 J. Paul Getty Trust and World Monuments Fund

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
-->
{% extends "base-nifty.htm" %}
{% load staticfiles %}
{% load i18n %}

{% block title %}
{{ block.super }}
{% trans "Graphs" %}
{% endblock title %}

{% block content %}
<!-- Form Container -->
<div class="slide">

	<!-- Page Title/Saerch -->
	<div id="page-title">
		<h1 class="page-header text-overflow" style="font-size: 21px; padding-top: 7px; padding-bottom: 5px;">{% trans "Graphs" %}</h1>
	</div>
	<!--End page title-->

    <div style="padding: 10px 0px 30px 0px;display:none;" data-bind="visible:graphs().length>0">

    	<!-- Project Tools -->
    	<div class="relative" style="height: 36px; border-bottom: 1px solid #ddd; margin-bottom: 20px;">

    		<div>

    			<!-- Summary -->
    			<p style="padding-top: 5px; padding-left: 25px; font-size: 13px; color: #888;">
    				{% trans "You have" %} <span style="color: #123; font-weight: 700;" data-bind="text:graphs().length"></span> {% trans "graphs" %}.
    			</p><p>

    		</div>
    	</div>


    	<!-- Card Report -->
    	<div>
    		<div class="row">

    			<!-- Section Data -->
    			<div class="col-xs-12" style="margin: 10px 10px 20px 40px; padding-right: 40px;">

    				<!-- Isotope Layout -->
    				<div id="report-image-grid" class="report-image-grid">

    					<!-- New Project Button -->
    					<div class="box-vmiddle bg-primary pad-all text-center card-wz-add-record project-grid-item">
    						<a id="add-basemap" href="#new-project-modal" data-toggle="modal">
    							<h3 class="text-thin" style="margin-top: 10px;"> {% trans "New Graph" %}</h3>

    							<span class="icon-wrap icon-wrap-lg icon-circle bg-trans-light">
    								<i class="fa fa-plus fa-2x" style="color: #fff;"></i>
    							</span>

    							<h5 style="font-weight: 200;"> {% trans "Create a new graph as part of your heritage inventory" %}</h5>
    						</a>
    					</div>
                        <!-- ko foreach: graphs -->
    					<div class="project-grid-item">
    						<div class="panel mar-no">

    							<!-- Resource Name -->
    							<div class="panel-heading">
    				                <h3 class="panel-title" style="padding-left: 10px;" data-bind="text:name, click:open"></h3>
    				            </div>

    							<!-- Abstract -->
    							<div class="panel-body" style="padding: 15px 20px 25px 10px; height: 108px;" data-bind='text:description?description:"{% trans "No description available." %}", click:open'></div>

    							<!-- Project Tools -->
    							<div class="panel-footer" style="height: 40px;">
                                    <span data-bind="if:isresource"><span><i class="fa fa-sitemap"></i> {% trans "resource" %}, </span> <i class="fa" data-bind="css: {'fa-check-circle': isactive, 'fa-minus-circle': !isactive}"></i> <span data-bind='text:isactive?"{% trans "active" %}":"{% trans "inactive" %}"'></span></span>
                                    <span data-bind="if:!isresource"><span><i class="fa fa-link"></i> {% trans "graph" %}</span></span>
    								<a class="pull-right dropdown" style="margin-top: 3px;" data-toggle="dropdown"><i class="fa fa-ellipsis-h" style="color: #666;"></i></a>
    									<ul class="dropdown-menu pull-right">
    									<li><a href="#" data-bind="click:clone"><i class="fa fa-copy"></i> {% trans "Clone Resource" %}</a>
    									</li>
    									<li class="divider"></li>
    									<li><a href="#" data-bind="click:deleteGraph"><i class="fa fa-trash"></i> {% trans "Delete Resource" %}</a>
    									</li>
    								</ul>
    							</div>
    						</div>
    					</div>
                        <!-- /ko -->
    				</div>
    			</div>
    		</div>
    	</div>

    </div>
</div>
<div class="modal fade" id="new-project-modal" role="dialog" tabindex="-1" aria-labelledby="demo-default-modal" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">

			<!--Modal header-->
			<div class="modal-header">
				<button data-dismiss="modal" class="close" type="button">
				<span aria-hidden="true">&times;</span>
				</button>
				<h4 class="modal-title">{% trans "Create New Graph" %}</h4>
			</div>

			<!--Modal body-->
			<div class="modal-body">

				<!-- New Project Tools -->
				<div class="row">
					<div class="col-sm-6">
						<input data-bind="value:newGraphName, valueUpdate: 'keyup'" placeholder="{% trans "Name your graph" %}" class="form-control input-lg widget-input" style="background: #f4f4f4; border: 1px solid #bbb;">
					</div>
					<div class="col-sm-6" style="margin-top: 10px;">
						<a href="" class="pad-rgt pull-right" style="">
							<h4 class="" style="font-size: 13px; font-weight: 700;">{% trans "Pick a template" %}</h4>
						</a>
					</div>
				</div>

				<!-- Isotope Layout -->
				<div id="template-image-grid" class="report-image-grid" style="overflow-y: scroll;">

					<!-- Template -->
                    <!-- ko foreach: graphs -->
					<div class="template-grid-item" data-bind="click:select, css:{'selected-template':selected()}">
						<div class="panel mar-no">
							<!-- Project Name, Abstract -->
							<div class="panel-body" style="padding: 15px 20px 25px 20px; height: 125px;">
								<h4 class="mar-no" data-bind="text:name"></h4>
                                <span data-bind='text:description?description:"{% trans "No description available." %}"'></span>
							</div>

							<!-- Project Tools -->
							<div class="panel-footer" style="height: 40px;">
                                <span data-bind="if:isresource"><span><i class="fa fa-sitemap"></i> {% trans "resource" %}, </span> <i class="fa" data-bind="css: {'fa-check-circle': isactive, 'fa-minus-circle': !isactive}"></i> <span data-bind='text:isactive?"{% trans "active" %}":"{% trans "inactive" %}"'></span></span>
                                <span data-bind="if:!isresource"><span><i class="fa fa-link"></i> {% trans "graph" %}</span></span>
							</div>
						</div>
					</div>
                    <!-- /ko -->

				</div>
			</div>

			<!--Modal footer-->
			<div class="modal-footer">
				<button data-dismiss="modal" class="btn btn-danger btn-labeled fa fa-times" data-bind="click: function () { newGraphName(''); selectedGraph(null); }" type="button">{% trans "Nevermind" %}</button>
				<button class="btn btn-primary btn-labeled fa fa-check" data-bind="css: {'disabled':!selectedGraph()||newGraphName()===''}, click: cloneSelected">{% trans "Create graph" %}</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="graph-name-modal" role="dialog" tabindex="-1" aria-labelledby="demo-default-modal" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">

			<!--Modal header-->
			<div class="modal-header">
				<button data-dismiss="modal" class="close" type="button">
				<span aria-hidden="true">&times;</span>
				</button>
				<h4 class="modal-title">{% trans "Name Your New Graph" %}</h4>
			</div>

			<!--Modal body-->
			<div class="modal-body">

				<!-- New Project Tools -->
				<div class="row">
					<div class="col-sm-12">
						<input data-bind="value:newGraphName, valueUpdate: 'keyup'" placeholder="{% trans "Name your graph" %}" class="form-control input-lg widget-input" style="background: #f4f4f4; border: 1px solid #bbb;">
					</div>
				</div>

			</div>

			<!--Modal footer-->
			<div class="modal-footer">
				<button data-dismiss="modal" class="btn btn-danger btn-labeled fa fa-times" data-bind="click: function () { newGraphName(''); selectedGraph(null); }" type="button">{% trans "Nevermind" %}</button>
				<button class="btn btn-primary btn-labeled fa fa-check" data-bind="css: {'disabled':!selectedGraph()||newGraphName()===''}, click: cloneSelected">{% trans "Create graph" %}</button>
			</div>
		</div>
	</div>
</div>


<input id="graphs" name="graphs" type="hidden" value="{{graphs}}"/>
<input id="metadata" name="metadata" type="hidden" value="{{metadata}}"/>
{% endblock content %}
