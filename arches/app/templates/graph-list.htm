<!--
ARCHES - a program developed to inventory and manage immovable cultural heritage.
Copyright (C) 2013 J. Paul Getty Trust and World Monuments Fund

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
-->
{% extends "base-nifty.htm" %}
{% load staticfiles %}
{% load i18n %}

{% block title %}
{{ block.super }}
{% trans "Graphs" %}
{% endblock title %}

{% block content %}
<div>
    <div class="" style="height: 80px; background: #f8f8f8; border-bottom: 1px solid #ddd;">
        <div class="center-div" style="padding-top: 0px; padding-left: 28px;">
            <h1 class="page-header text-overflow arches-panel-header"><i class="text-center fa fa-bookmark icon-wrap bg-gray arches-panel-icon"></i> {% trans "Arches Designer" %}</h1>
            <p class="arches-panel-subtitle">{% trans "Design new data types to include in your inventory" %}</p>
        </div>
    </div>

    <!-- Toolbar -->
    <div class="relative" style="height: 60px; background: #f4f4f4; border-bottom: 1px solid #e4e4e4;">

        <!-- Search -->
        <div class="edit-panel-search-bar">
            <!-- Toggle Button -->
            <button class="btn btn-flat btn-flat-trans right-border"><i class="fa fa-search"></i> {% trans "Find" %} </button>

            <!-- Find widget -->
            <div class="find-widget">
                <input type="text" class="form-control" placeholder="{% trans "Type a resource or graph name..." %}">
                <span class="clear-find"><i class="fa fa-times-circle"></i></span>
            </div>

        </div>

        <div style="position: absolute; right: 50px; top: 10px;">
            <a class="btn btn-flat btn-flat-trans" href="#new-project-modal" data-toggle="modal"><i class="fa fa-plus-circle"></i> {% trans "New Resource" %}</a>
        </div>
    </div>
</div>


<!-- Default Page content-->
<div id="page-content" style="overflow: auto; padding: 0 50px 50px; margin-top: -1px;">

    <div id="report-image-grid" class="report-image-grid">

        <!-- ko foreach: graphs -->
        <div class="resource-grid-item relative">
            <!-- Resource Type -->
            <div class="resource-grid-main-container">
                <div class="resource-grid-main">
                    <h1 class="page-header text-overflow resource-grid-title"><i class="fa fa-th icon-wrap resource-grid-icon"></i> <span data-bind="text:name"></span></h1>
                    <p class="resource-grid-subtitle" data-bind='text:description?description:"{% trans "No description available." %}"'></p>
                </div>
            </div>

            <!-- Resource Tools -->
            <div class="resource-grid-tools-container">
                <a href="javascript:void(0)" class="pad-rgt" data-bind="click:open"><i class="fa fa-check-circle"></i> {% trans "Edit" %}</a>
                <a href="javascript:void(0)" class="pad-rgt" data-bind="click:clone"><i class="fa fa-copy"></i> {% trans "Copy" %}</a>
                <a href="javascript:void(0)" class="pad-rgt" data-bind="click:deleteGraph"><i class="fa fa-trash"></i> {% trans "Delete" %}</a>
            </div>

            <!-- Resource Metadata -->
            <div class="resource-grid-meta-container">
                <ul class="list-inline resource-grid-meta">
                    <li data-bind="if:!isresource">{% trans "Graph" %}</li>
                    <li data-bind="if:isresource">{% trans "Resource" %}</li>
                    <li class="text-semibold text-primary" data-bind="if: isactive">{% trans "Active" %}</li>
                    <li class="text-semibold text-danger" data-bind="if: !isactive">{% trans "Inactive" %}</li>
                </ul>
            </div>
        </div>
        <!-- /ko -->

    </div>
</div>


<div class="modal fade" id="new-project-modal" role="dialog" tabindex="-1" aria-labelledby="demo-default-modal" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">

			<!--Modal header-->
			<div class="modal-header">
				<button data-dismiss="modal" class="close" type="button">
				<span aria-hidden="true">&times;</span>
				</button>
				<h4 class="modal-title">{% trans "Create New Graph" %}</h4>
			</div>

			<!--Modal body-->
			<div class="modal-body">

				<!-- New Project Tools -->
				<div class="row">
					<div class="col-sm-6">
						<input data-bind="value:newGraphName, valueUpdate: 'keyup'" placeholder="{% trans "Name your graph" %}" class="form-control input-lg widget-input" style="background: #f4f4f4; border: 1px solid #bbb;">
					</div>
					<div class="col-sm-6" style="margin-top: 10px;">
						<a class="pad-rgt pull-right">
							<h4 style="font-size: 13px; font-weight: 700;">{% trans "Pick a template" %}</h4>
						</a>
					</div>
				</div>

				<!-- Isotope Layout -->
				<div id="template-image-grid" class="report-image-grid" style="overflow-y: scroll;">

					<!-- Template -->
                    <!-- ko foreach: graphs -->
					<div class="template-grid-item" data-bind="click:select, css:{'selected-template':selected()}">
						<div class="panel mar-no">
							<!-- Project Name, Abstract -->
							<div class="panel-body" style="padding: 15px 20px 25px 20px; height: 125px;">
								<h4 class="mar-no" data-bind="text:name"></h4>
                                <span data-bind='text:description?description:"{% trans "No description available." %}"'></span>
							</div>

							<!-- Project Tools -->
							<div class="panel-footer" style="height: 40px;">
                                <span data-bind="if:isresource"><span><i class="fa fa-sitemap"></i> {% trans "resource" %}, </span> <i class="fa" data-bind="css: {'fa-check-circle': isactive, 'fa-minus-circle': !isactive}"></i> <span data-bind='text:isactive?"{% trans "active" %}":"{% trans "inactive" %}"'></span></span>
                                <span data-bind="if:!isresource"><span><i class="fa fa-link"></i> {% trans "graph" %}</span></span>
							</div>
						</div>
					</div>
                    <!-- /ko -->

				</div>
			</div>

			<!--Modal footer-->
			<div class="modal-footer">
				<button data-dismiss="modal" class="btn btn-danger btn-labeled fa fa-times" data-bind="click: function () { newGraphName(''); selectedGraph(null); }" type="button">{% trans "Nevermind" %}</button>
				<button class="btn btn-primary btn-labeled fa fa-check" data-bind="css: {'disabled':!selectedGraph()||newGraphName()===''}, click: cloneSelected">{% trans "Create graph" %}</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="graph-name-modal" role="dialog" tabindex="-1" aria-labelledby="demo-default-modal" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">

			<!--Modal header-->
			<div class="modal-header">
				<button data-dismiss="modal" class="close" type="button">
				<span aria-hidden="true">&times;</span>
				</button>
				<h4 class="modal-title">{% trans "Name Your New Graph" %}</h4>
			</div>

			<!--Modal body-->
			<div class="modal-body">

				<!-- New Project Tools -->
				<div class="row">
					<div class="col-sm-12">
						<input data-bind="value:newGraphName, valueUpdate: 'keyup'" placeholder="{% trans "Name your graph" %}" class="form-control input-lg widget-input" style="background: #f4f4f4; border: 1px solid #bbb;">
					</div>
				</div>

			</div>

			<!--Modal footer-->
			<div class="modal-footer">
				<button data-dismiss="modal" class="btn btn-danger btn-labeled fa fa-times" data-bind="click: function () { newGraphName(''); selectedGraph(null); }" type="button">{% trans "Nevermind" %}</button>
				<button class="btn btn-primary btn-labeled fa fa-check" data-bind="css: {'disabled':!selectedGraph()||newGraphName()===''}, click: cloneSelected">{% trans "Create graph" %}</button>
			</div>
		</div>
	</div>
</div>


<input id="graphs" name="graphs" type="hidden" value="{{graphs}}"/>
<input id="metadata" name="metadata" type="hidden" value="{{metadata}}"/>
{% endblock content %}
